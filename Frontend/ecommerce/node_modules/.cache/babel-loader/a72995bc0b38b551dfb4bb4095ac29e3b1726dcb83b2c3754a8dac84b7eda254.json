{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-d8f3d62a\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"main-content\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", null, \"User Management\", -1 /* HOISTED */));\nconst _hoisted_3 = {\n  class: \"form-container\"\n};\nconst _hoisted_4 = {\n  class: \"form-group\"\n};\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"username\"\n}, \"Username\", -1 /* HOISTED */));\nconst _hoisted_6 = {\n  class: \"form-group\"\n};\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"password\"\n}, \"Password\", -1 /* HOISTED */));\nconst _hoisted_8 = {\n  class: \"form-group\"\n};\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"email\"\n}, \"Email\", -1 /* HOISTED */));\nconst _hoisted_10 = {\n  class: \"form-group\"\n};\nconst _hoisted_11 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"role\"\n}, \"Role\", -1 /* HOISTED */));\nconst _hoisted_12 = [\"value\"];\nconst _hoisted_13 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\",\n  class: \"btn btn-primary\"\n}, \"Save User\", -1 /* HOISTED */));\nconst _hoisted_14 = {\n  class: \"table-container\"\n};\nconst _hoisted_15 = {\n  class: \"user-table\"\n};\nconst _hoisted_16 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"thead\", null, [/*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"th\", null, \"Username\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Email\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Role\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Actions\")])], -1 /* HOISTED */));\nconst _hoisted_17 = [\"onClick\"];\nconst _hoisted_18 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createCommentVNode(\" Formulario de Usuario \"), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"form\", {\n    onSubmit: _cache[4] || (_cache[4] = _withModifiers((...args) => $options.handleSubmit && $options.handleSubmit(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_4, [_hoisted_5, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"username\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.form.username = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.username]])]), _createElementVNode(\"div\", _hoisted_6, [_hoisted_7, _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    id: \"password\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.form.password = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.password]])]), _createElementVNode(\"div\", _hoisted_8, [_hoisted_9, _withDirectives(_createElementVNode(\"input\", {\n    type: \"email\",\n    id: \"email\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.form.email = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.email]])]), _createElementVNode(\"div\", _hoisted_10, [_hoisted_11, _withDirectives(_createElementVNode(\"select\", {\n    id: \"role\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.form.role = $event),\n    required: \"\"\n  }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.roles, role => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: role.id,\n      value: role.name\n    }, _toDisplayString(role.name), 9 /* TEXT, PROPS */, _hoisted_12);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, $data.form.role]])]), _hoisted_13], 32 /* NEED_HYDRATION */)]), _createCommentVNode(\" Tabla de Usuarios \"), _createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"table\", _hoisted_15, [_hoisted_16, _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.users, user => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: user.id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(user.username), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(user.email), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(user.role), 1 /* TEXT */), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      onClick: $event => $options.editUser(user),\n      class: \"btn btn-secondary\"\n    }, \" Edit \", 8 /* PROPS */, _hoisted_17), _createElementVNode(\"button\", {\n      onClick: $event => $options.deleteUser(user.id),\n      class: \"btn btn-danger\"\n    }, \" Delete \", 8 /* PROPS */, _hoisted_18)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])])]);\n}","map":{"version":3,"names":["class","_createElementVNode","for","type","_createElementBlock","_hoisted_1","_hoisted_2","_createCommentVNode","_hoisted_3","onSubmit","_cache","_withModifiers","args","$options","handleSubmit","_hoisted_4","_hoisted_5","id","$event","$data","form","username","required","_hoisted_6","_hoisted_7","password","_hoisted_8","_hoisted_9","email","_hoisted_10","_hoisted_11","role","_Fragment","_renderList","roles","key","value","name","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","users","user","_toDisplayString","onClick","editUser","_hoisted_17","deleteUser","_hoisted_18"],"sources":["C:\\Users\\leand\\Downloads\\ecommerce\\ecommerce\\src\\components\\UsersManagement.vue"],"sourcesContent":["<template>\r\n  <div class=\"main-content\">\r\n    <h1>User Management</h1>\r\n\r\n    <!-- Formulario de Usuario -->\r\n    <div class=\"form-container\">\r\n      <form @submit.prevent=\"handleSubmit\">\r\n        <div class=\"form-group\">\r\n          <label for=\"username\">Username</label>\r\n          <input type=\"text\" id=\"username\" v-model=\"form.username\" required />\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"password\">Password</label>\r\n          <input\r\n            type=\"password\"\r\n            id=\"password\"\r\n            v-model=\"form.password\"\r\n            required\r\n          />\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"email\">Email</label>\r\n          <input type=\"email\" id=\"email\" v-model=\"form.email\" required />\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"role\">Role</label>\r\n          <select id=\"role\" v-model=\"form.role\" required>\r\n            <option v-for=\"role in roles\" :key=\"role.id\" :value=\"role.name\">\r\n              {{ role.name }}\r\n            </option>\r\n          </select>\r\n        </div>\r\n        <button type=\"submit\" class=\"btn btn-primary\">Save User</button>\r\n      </form>\r\n    </div>\r\n\r\n    <!-- Tabla de Usuarios -->\r\n    <div class=\"table-container\">\r\n      <table class=\"user-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>Username</th>\r\n            <th>Email</th>\r\n            <th>Role</th>\r\n            <th>Actions</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"user in users\" :key=\"user.id\">\r\n            <td>{{ user.username }}</td>\r\n            <td>{{ user.email }}</td>\r\n            <td>{{ user.role }}</td>\r\n            <td>\r\n              <button @click=\"editUser(user)\" class=\"btn btn-secondary\">\r\n                Edit\r\n              </button>\r\n              <button @click=\"deleteUser(user.id)\" class=\"btn btn-danger\">\r\n                Delete\r\n              </button>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  name: \"UserManagement\",\r\n  data() {\r\n    return {\r\n      form: {\r\n        id: null,\r\n        username: \"\",\r\n        password: \"\",\r\n        email: \"\",\r\n        role: \"\",\r\n      },\r\n      users: [],\r\n      roles: [], // Agregamos una propiedad para almacenar los roles\r\n    };\r\n  },\r\n  methods: {\r\n    async fetchUsers() {\r\n      try {\r\n        const response = await axios.get(\"http://localhost:8080/users\");\r\n        this.users = response.data;\r\n      } catch (error) {\r\n        console.error(\"There was an error fetching the users!\", error);\r\n      }\r\n    },\r\n    async fetchRoles() {\r\n      // Método para obtener los roles de la API\r\n      try {\r\n        const response = await axios.get(\"http://localhost:8080/roles\");\r\n        this.roles = response.data;\r\n      } catch (error) {\r\n        console.error(\"There was an error fetching the roles!\", error);\r\n      }\r\n    },\r\n    async handleSubmit() {\r\n      if (this.form.id) {\r\n        // Editar usuario existente\r\n        try {\r\n          await axios.put(\r\n            `http://localhost:8080/users/${this.form.id}`,\r\n            this.form\r\n          );\r\n          this.fetchUsers();\r\n        } catch (error) {\r\n          console.error(\"There was an error updating the user!\", error);\r\n        }\r\n      } else {\r\n        // Agregar nuevo usuario\r\n        try {\r\n          await axios.post(\"http://localhost:8080/users\", this.form);\r\n          this.fetchUsers();\r\n        } catch (error) {\r\n          console.error(\"There was an error adding the user!\", error);\r\n        }\r\n      }\r\n      this.resetForm();\r\n    },\r\n    editUser(user) {\r\n      this.form = { ...user };\r\n    },\r\n    async deleteUser(id) {\r\n      try {\r\n        await axios.delete(`http://localhost:8080/users/${id}`);\r\n        this.fetchUsers();\r\n      } catch (error) {\r\n        console.error(\"There was an error deleting the user!\", error);\r\n      }\r\n    },\r\n    resetForm() {\r\n      this.form = {\r\n        id: null,\r\n        username: \"\",\r\n        password: \"\",\r\n        email: \"\",\r\n        role: \"\", // Eliminamos el valor predeterminado \"USER\"\r\n      };\r\n    },\r\n  },\r\n  created() {\r\n    this.fetchUsers();\r\n    this.fetchRoles(); // Llamamos al método para obtener los roles al crear el componente\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.main-content {\r\n  margin-left: 200px; /* Ajusta este valor según el ancho de tu sidebar */\r\n  padding: 20px;\r\n  background-color: #f8f9fa;\r\n  min-height: 100vh;\r\n}\r\n.form-container {\r\n  background: white;\r\n  padding: 20px;\r\n  margin-bottom: 20px;\r\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\r\n}\r\n.form-group {\r\n  margin-bottom: 15px;\r\n}\r\n.form-group label {\r\n  display: block;\r\n  margin-bottom: 5px;\r\n}\r\n.form-group input,\r\n.form-group textarea,\r\n.form-group select {\r\n  width: 100%;\r\n  padding: 8px;\r\n  box-sizing: border-box;\r\n  border: 1px solid #ced4da;\r\n  border-radius: 4px;\r\n}\r\n.btn {\r\n  padding: 10px 15px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n.btn-primary {\r\n  background-color: #007bff;\r\n  color: white;\r\n}\r\n.btn-secondary {\r\n  background-color: #6c757d;\r\n  color: white;\r\n}\r\n.btn-danger {\r\n  background-color: #dc3545;\r\n  color: white;\r\n}\r\n.table-container {\r\n  background: white;\r\n  padding: 20px;\r\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\r\n}\r\n.user-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n}\r\n.user-table th,\r\n.user-table td {\r\n  border: 1px solid #dee2e6;\r\n  padding: 10px;\r\n  text-align: left;\r\n}\r\n.user-table th {\r\n  background-color: #e9ecef;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}